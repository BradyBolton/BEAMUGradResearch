# Setup
* `Encoder`: interfaces MATLAB with a quadrature/Arduino setup via USB. See folder for more documentation.
* `Encoder_BT`: interfaces MATLAB with a quadrature/Arduino setup via HC05 Bluetooth module. This implementation does not use MATLAB's existing HC05 library due to [existing configuration issues](https://www.mathworks.com/matlabcentral/answers/407123-solved-initializing-bluetooth-hc-05-to-arduino-connection-r2018a). See folder for more documentation.
* `HITEC_D845WP`: controls the fish-robot motors. See folder for more documentation.
* `Load_Cell_BT`: interfaces MATLAB with a load-cell/Arduino setup via HC05 Bluetooth module using a HX711 amplifier to amplify small voltage differentials to detectable levels for the MCU. See folder for more documentation.

# Complete Setup Notes
1. *Encoder Setup*: In `Encoder_BT`, run `BT_configuration.ino` on the Arduino that will be reading the encoder if you haven't already. Then updload the `encoderBTArduino.ino` routine to the same board. Copy `clearSerials.m`, `getRotaryState.m`, and `initEncoder.m` to the same repository as your main MATLAB code. Refer to `encoderBT_Example.m` as an example on how to use the encoder in MATLAB.
2. *Load-cell Setup*: In `Load_Cell_BT`, run `BT_configuration.ino` on the Arduino reading from the load-cell like the first step. You will want to calibrate the load-cell using `load_callibration.ino` to find the right parameter to use in `scale.set_scale()` function call. Once you've found and updated this parameter in `loadcell_bluetooth.ino`, upload this to the board. Then copy `initLoadCell.m` to your main repository and refer to `loadcellBT_Example.m` as an example on how to use the load-cell in MATLAB.
3. *Servo Setup*: In `HITEC_D845WP`, run `ServoCenter.ino` and make sure that the Arduino is connected properly via COM (go to `Tools`>`Port` and `Tools`>`Board`). Then use `Ctrl`+`Shift`+`M` to open up the serial monitor and follow the instructions as it appears in the command prompt and center the horn until you are satisfied. Record the `Adjustment` parameter, and use this value as the `CENTER_ADJUSTMENT` parameter for your `initServo` call in your main MATLAB script. Make sure to copy `initServo.m`, `adjustServoParameters.m`, and `activateServo.m` to your main repository. Refer to `servo_Example.m` as an example on how to use the servo.
4. *Main Code*: Open up and run `Fish_Experiment.m` to run the entire experiment. 
